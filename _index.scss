////
/// Tom's Simple Grid
/// 
/// @author Tom Slominski
////

@use 'node_modules/toms-sass-helpers' as *;
@use 'sass:map';

/// List of grid sizes to generate for each breakpoint.
/// `*` is for generating classes with no breakpoint.
///
/// @type map
/// @prop {string} Key - Breakpoint name from toms-sass-helpers package.
/// @prop {list} Value - A list of grid widths to generate for this breakpoint.
$grid-sizes: (
	"*": (1, 2),
	'sm': (1, 3, 4, 12),
	'md': (1, 3, 4, 12),
	"lg": (1, 3, 4, 12),
	"xl": (1, 3, 4, 12),
	"xxl": (1, 3, 4, 12),
	"xxxl": (1, 3, 4, 12)
);

/// Maximum allowed grid width.
///
/// @type number
$grid-width: 1200px;

/// Wrap the content in breakpoint, if necessary
///
/// @param {string} $bp Breakpoint name from toms-sass-helpers package.
@mixin grid-bp( $bp ) {
	@if "*" == $bp {
		@content
	} @else {
		@include bp( $bp ) {
			@content;
		}
	}
}

/// Generate class name for a specific grid width.
///
/// @param {string} $name Name of the breakpoint.
/// @param {int} $current Currently iterated over width.
/// @param {int} $total Total available widths number.
/// @return {string} CSS class name.
@function grid-class-name( $name, $current, $total ) {
	@if "*" == $name {
		@return ".t-width-#{$current}-#{$total}";
	} @else {
		@return ".t-width-#{$name}-#{$current}-#{$total}";
	}
}

.container {
	width: 100%;
	max-width: $grid-width;
	margin-left: auto;
	margin-right: auto;
	padding-left: 20px;
	padding-right: 20px;
	box-sizing: border-box;
	
	* {
		box-sizing: border-box;
	}
}

.row {
	display: flex;
	flex-wrap: wrap;
	margin: 0 -20px;
}

[class^="t-width"] {
	padding-left: 20px;
	padding-right: 20px;
}

@each $name, $sizes in $grid-sizes {
	@include grid-bp( $name ) {
		@each $size in $sizes {
			@for $i from 1 through $size {
				$class-name: grid-class-name( $name, $i, $size );
				
				#{$class-name} {
					width: $i / $size * 100%;
				}
			}
		}
	}
}
